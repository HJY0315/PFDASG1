@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCBC</title>
    <link rel="stylesheet" type="text/css" href="~/css/transfer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body>
    <header>
        @await Html.PartialAsync("_navbar.cshtml")
    </header>
    <div class="transfer-form container mt-5">
        <div class="form-step-list">
            <div class="form-step-item active">
                <span class="item__step">1</span>
                <p class="item__title mt-1">Select Account</p>
            </div>
            <div class="form-step-item text-center">
                <span class="item__step">2</span>
                <p class="item__title mt-1">Search Recipient</p>
            </div>
            <div class="form-step-item text-center">
                <span class="item__step">3</span>
                <p class="item__title mt-1">Enter Amount</p>
            </div>
            <div class="form-step-item text-right">
                <span class="item__step">4</span>
                <p class="item__title mt-1">Review</p>
            </div>
        </div>

        <div class="form-layout">
            <!-- Step 1: Select Account --><!-- Backend for Frank card number and saving acct number-->
            <div class="form-group step-content">
                <label for="bankTransfer">Choose Account</label>
                <select name="bankTransfer" id="bankTransfer">
                    <option value="1">Please Select</option>
                    <option value="2">Frank Card </option>
                    <option value="3">Saving Account </option>
                </select>
            </div>

            <!-- Step 2: Select Payment Type -->
            <div class="form-group step-content">
                <label for="paymentType">Search Recipient</label>
                <select name="paymentType" id="paymentType" onchange="updatePaymentMethod()">
                    <option value="1">Please Select</option>
                    <option value="2">NRIC</option>
                    <option value="3">Mobile Number</option>
                </select>

                <!-- Input for NRIC -->
                <div class="form-group" id="nricInput" style="display:none;">
                    <label for="nric">Enter NRIC</label>
                    <input type="text" id="nric" placeholder="S1234567A" maxlength="9"/>
                </div>

                <!-- Input for Mobile Number -->
                <div class="form-group" id="mobileInput" style="display:none;">
                    <label for="mobileNumber">Enter Mobile Number</label>
                    <input type="text" id="mobileNumber" placeholder="91234567" maxlength="8"/>
                </div>
            </div>


            <!-- Step 3: Enter Amount --><!-- Backend for validation for amount and add the $ thingy-->
            <div class="form-group step-content">
                <label for="amount">Enter your Amount</label>
                <input type="text" id="amount" required /> <br />
                <label for="description">Description</label>
                <input type="text" id="description" required />
            </div>

            <!-- Step 4: Review --><!-- Backend for validation for amount and add the $ thingy-->
            <div class="form-group step-content">
                <img src="../img/checked.png" width="150" height="150" />
                <p>Amount: <span id="reviewAmount"></span></p>
                <p>Transfer to: <span id="reviewTransferTo"></span></p>
                <p>Description: <span id="reviewDescription"></span></p>
            </div>
        </div>

        <!-- Next and Previous Buttons -->
        <div class="form-navigation mt-5">
            <button class="btn btn-primary" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextPrev(1)">Next</button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
    <script>
        let currentStep = 0;    
        const formSteps = document.querySelectorAll('.form-step-item');
        const formContents = document.querySelectorAll('.form-group.step-content');

        function showStep(stepIndex) {
            formSteps.forEach((step, index) => {
                step.classList.toggle('active', index === stepIndex);
            });

            formContents.forEach((content, index) => {
                const isCurrentStep = index === stepIndex;
                content.classList.toggle('active', isCurrentStep);

                // Hide or show the content based on the current step
                if (isCurrentStep) {
                    content.style.display = 'block';
                } else {
                    content.style.display = 'none';
                }
            });

            updateReviewContent();
        }


        function updateReviewContent() {
            const reviewAmount = document.getElementById('reviewAmount');
            const reviewTransferTo = document.getElementById('reviewTransferTo');
            const reviewDescription = document.getElementById('reviewDescription');

            // Get values from the form inputs
            const amount = document.getElementById('amount').value;
            const bankTransfer = document.getElementById('bankTransfer').value;
            const paymentType = document.getElementById('paymentType').value;

            // Update the review content
            reviewAmount.textContent = amount;
            reviewTransferTo.textContent = getTransferToText(bankTransfer, paymentType);
            reviewDescription.textContent = getDescriptionText(bankTransfer, paymentType);
        }

        function getTransferToText(bankTransfer, paymentType) {
            // Customize this function based on your requirements
            if (paymentType === '2') {
                return 'Transfer to NRIC ending with ' + paymentType;
            } else if (paymentType === '3') {
                return 'Transfer to Mobile Number ' + paymentType;
            } else {
                return 'Unknown Transfer';
            }
        }

        function getDescriptionText(bankTransfer, paymentType) {
            // Customize this function based on your requirements
            return 'Payment for ' + getTransferToText(bankTransfer, paymentType);
        }

        function nextPrev(stepChange) {
            
            if (currentStep === 2) {  // Step 3
                // Prompt for confirmation
                if (confirm('Are you sure you want to transfer?')) {
                    currentStep += stepChange;
                }
            } else {
                currentStep += stepChange;
            }

            if (currentStep < 0) {
                currentStep = 0;
            } else if (currentStep >= formSteps.length) {
                currentStep = formSteps.length - 1;
            }
            showStep(currentStep);
        }

        // Initially show only the Khởi tạo content
        document.addEventListener('DOMContentLoaded', function () {
            showStep(0);
        });

        function updatePaymentMethod() {
            const paymentType = document.getElementById('paymentType').value;
            const nricInput = document.getElementById('nricInput');
            const mobileInput = document.getElementById('mobileInput');

            // Show or hide inputs based on the selected payment method
            if (paymentType === '2') {
                nricInput.style.display = 'block';
                mobileInput.style.display = 'none';
            } else if (paymentType === '3') {
                nricInput.style.display = 'none';
                mobileInput.style.display = 'block';
            } 
            else {
                // Handle other payment methods if needed
                nricInput.style.display = 'none';
                mobileInput.style.display = 'none';
            }

            updateReviewContent();
        }

    </script>
</body>

</html>
